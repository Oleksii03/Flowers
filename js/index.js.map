{"version":3,"file":"index.js","sources":["../../src/js/pages/main/get-сards-data.js","../../src/js/partials/preloader.js","../../src/js/pages/main/cards-markup-forum.js","../../src/js/pages/main/forum-slider.js","../../src/js/pages/main/add-to-local-storage.js","../../src/js/index.js"],"sourcesContent":["import { getFirestore } from 'firebase/firestore';\nimport { getAllDocuments } from '../../utils/mixins';\n\nexport function createCard(app) {\n  const stockBox = document.querySelector('.js-main-swiper-stock');\n  const seasonalBox = document.querySelector('.js-main-swiper-seasonal');\n  const presentBox = document.querySelector('.js-main-swiper-present');\n  // ----refs------------\n  const collectionName = ['Stock', 'Seasonal', 'Present'];\n  const arrContainers = [stockBox, seasonalBox, presentBox];\n  // ---arrs-------------\n\n  const db = getFirestore(app);\n\n  for (let i = 0; i < collectionName.length; i++) {\n    const title = collectionName[i];\n    const container = arrContainers[i];\n\n    getAllDocuments(db, title, container);\n  }\n}\n","export function preloader() {\n  const preloader = document.querySelector('.js-preloader');\n\n  isVisit();\n\n  function isVisit() {\n    if (!localStorage.getItem('is-visit')) {\n      onOpenPreloader();\n      return;\n    }\n\n    preloader.classList.add('preloader_hidden');\n    document.body.classList.remove('to-freeze');\n  }\n\n  function onOpenPreloader() {\n    preloader.classList.add('preloader_visible');\n    document.body.classList.add('to-freeze');\n\n    setTimeout(() => {\n      preloader.classList.add('preloader_hidden');\n      document.body.classList.remove('to-freeze');\n\n      localStorage.setItem('is-visit', 'true');\n    }, 4000);\n  }\n}\n","export function cardsMarkupForum(arr) {\n  const forumSliderContainer = document.querySelector('.js-main-swiper-forum');\n  // ----refs------------\n  const markup = arr.map(({ title, description, img: { png, webp } }) => {\n    return `\n      <div class=\"swiper-slide\">\n            <div class=\"main__slide-forum\">\n              <div class=\"main__slide-forum-picture-wrapper\">\n                <div class=\"main__slide-forum-img-wrapper\">\n                  <div class=\"main__slide-forum-img-overlay\"></div>\n                  <picture class=\"main__slide-forum-picture\">\n                    <source\n                      srcset=${webp ? `${webp}` : 'https://firebasestorage.googleapis.com/v0/b/flowers-4b1a5.appspot.com/o/pages%2F404%2Fplaceholder-404.webp?alt=media&token=89f10487-08e7-491f-8448-5998d2423abc'}\n                      type=\"image/webp\" />\n\n                    <img\n                      class=\"main__slide-forum-img\"\n                      width=\"412\"\n                      height=\"343\"\n                      loading=\"lazy\"\n                      src=${png ? `${png}` : 'https://firebasestorage.googleapis.com/v0/b/flowers-4b1a5.appspot.com/o/pages%2F404%2Fplaceholder-404.png?alt=media&token=69e0e0b2-fd05-421a-a13e-ce96a894acc6'}\n                      alt=\"${title}\" />\n                  </picture>\n                </div>\n              </div>\n\n              <div class=\"main__slide-forum-text\">\n                <p class=\"main__slide-forum-title\">${title}</p>\n\n                <p class=\"main__slide-forum-description\">${description}</p>\n              </div>\n            </div>\n          </div>`;\n  });\n  forumSliderContainer.innerHTML = markup.join('');\n}\n","import { getFirestore, collection, getDocs } from 'firebase/firestore';\nimport { cardsMarkupForum } from './cards-markup-forum';\n\nexport function forumSlider(app) {\n  const db = getFirestore(app);\n\n  async function getCollection() {\n    try {\n      const querySnapshot = await getDocs(collection(db, 'main-forum'));\n\n      const forumArray = [];\n\n      querySnapshot.forEach(doc => {\n        forumArray.push({ id: doc.id, ...doc.data() });\n      });\n\n      cardsMarkupForum(forumArray);\n    } catch (error) {\n      console.error('Error getting documents:', error);\n      return [];\n    }\n  }\n\n  getCollection();\n}\n","import { getCardData } from '../../utils/mixins';\nimport { updateLocalStorageCounter } from '../../utils/update-local-storage-counter';\nimport { KEY_BASKET, KEY_FAVORITE } from '../../utils/constants';\nimport { calculateTotalBasket } from '../../partials/calculateTotalBasket';\n// import { updateHeartStatus } from '../../partials/updateHeartStatus';\n\nexport function addToLocalStorage() {\n  const mainContainer = document.querySelector('.js-main-container');\n  // ---/-refs-------\n\n  let basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n  let favoriteArr = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\n  // ----handlers-------\n  mainContainer.addEventListener('click', addProduct);\n\n  function addProduct({ target }) {\n    if (target.classList.contains('js-basket')) {\n      addProductToBasket(target);\n    }\n\n    if (target.tagName === 'use') {\n      addProductToFavorite(target);\n    }\n  }\n\n  // ---add-product-to-basket-------\n  function addProductToBasket(target) {\n    const cardData = getCardData(target);\n    const inStorage = basketArr.some(({ id }) => id === cardData.id);\n\n    if (inStorage) return;\n\n    basketArr.push(cardData);\n    localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr));\n\n    updateLocalStorageCounter();\n    calculateTotalBasket();\n  }\n\n  // ---add-product-to-favorite-------\n  function addProductToFavorite(target) {\n    let targetEl = target.closest('.js-favorite');\n    if (!targetEl) return;\n\n    favoriteArr = JSON.parse(localStorage.getItem(KEY_FAVORITE)) ?? [];\n\n    if (!targetEl.classList.contains('slide-stock__content-top-favorite_active')) {\n      targetEl.classList.add('slide-stock__content-top-favorite_active');\n      const cardData = getCardData(target);\n\n      const inStorage = favoriteArr.some(({ id }) => id === cardData.id);\n\n      if (inStorage) return;\n\n      favoriteArr.push(cardData);\n      localStorage.setItem(KEY_FAVORITE, JSON.stringify(favoriteArr));\n\n      updateLocalStorageCounter();\n    } else {\n      targetEl.classList.remove('slide-stock__content-top-favorite_active');\n      const targetElId = targetEl.closest('.js-main-swiper-slide').dataset.id;\n      favoriteArr = favoriteArr.filter(({ id }) => id !== targetElId);\n      localStorage.setItem(KEY_FAVORITE, JSON.stringify(favoriteArr));\n\n      updateLocalStorageCounter();\n    }\n  }\n\n  // ---update-selected-counter-------\n  updateLocalStorageCounter();\n\n  // ---set-favorite-status-------\n  addEventListener('load', () => {\n    const allSlides = document.querySelectorAll('.js-main-swiper-slide');\n\n    favoriteArr.forEach(({ id }) => {\n      [...allSlides].forEach(slide => {\n        if (slide.dataset.id === id) {\n          slide\n            .querySelector('.js-favorite')\n            .classList.add('slide-stock__content-top-favorite_active');\n        }\n      });\n    });\n  });\n\n  // --updateLocalStorage--\n  window.addEventListener('storage', () => {\n    basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n    updateLocalStorageCounter();\n    calculateTotalBasket();\n  });\n}\n","import { header } from './partials/header';\nimport { mobMenu } from './partials/mob-menu';\nimport {\n  initSwiper,\n  stockSwiper,\n  seasonalSwiper,\n  presentSwiper,\n  forumSwiper,\n  modalFavoriteSwiper,\n} from './partials/swiper';\nimport { createCard } from './pages/main/get-сards-data';\nimport { preloader } from './partials/preloader';\nimport { firebaseConfig } from './partials/firebaseConfig';\nimport { forumSlider } from './pages/main/forum-slider';\nimport { createAccordionFaq } from './partials/accordion';\nimport { addToLocalStorage } from './pages/main/add-to-local-storage';\nimport { calculateTotalBasket } from './partials/calculateTotalBasket';\nimport { modalFavorite } from './partials/modalFavorite';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let app = firebaseConfig();\n  header();\n  mobMenu();\n  initSwiper();\n  createCard(app);\n  stockSwiper();\n  preloader();\n  seasonalSwiper();\n  presentSwiper();\n  forumSwiper();\n  forumSlider(app);\n  createAccordionFaq();\n  addToLocalStorage();\n  calculateTotalBasket();\n  modalFavorite();\n  modalFavoriteSwiper();\n});\n"],"names":["createCard","app","stockBox","seasonalBox","presentBox","collectionName","arrContainers","db","getFirestore","i","title","container","getAllDocuments","preloader","isVisit","onOpenPreloader","cardsMarkupForum","arr","forumSliderContainer","markup","description","png","webp","forumSlider","getCollection","querySnapshot","getDocs","collection","forumArray","doc","error","addToLocalStorage","mainContainer","basketArr","KEY_BASKET","favoriteArr","KEY_FAVORITE","addProduct","target","addProductToBasket","addProductToFavorite","cardData","getCardData","id","updateLocalStorageCounter","calculateTotalBasket","targetEl","targetElId","allSlides","slide","firebaseConfig","header","mobMenu","initSwiper","stockSwiper","seasonalSwiper","presentSwiper","forumSwiper","createAccordionFaq","modalFavorite","modalFavoriteSwiper"],"mappings":"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"}