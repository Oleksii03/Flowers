{"version":3,"file":"basket.js","sources":["../../../src/js/pages/basket/markup-cards-basket.js","../../../src/js/pages/basket/get-local-storage-data.js","../../../src/js/basket.js"],"sourcesContent":["export function markupCardsSuccess(arrData) {\n  return arrData.map((obj, i) => {\n    const {\n      id,\n      discount,\n      price,\n      oldPrice,\n      title,\n      img: { png, webp },\n    } = obj;\n\n    // Return HTML markup for cards\n    return `\n      <li class=\"basket-main__list-item\" data-id=\"${id}\">\n          <picture class=\"basket-main__list-picture\">\n            <source\n              srcset=\"${webp}\"\n              type=\"image/webp\" />\n            <img\n              class=\"basket-main__list-img\"\n              width=\"83\"\n              height=\"104\"\n              src=\"${png}\"\n              alt=\"#\" />\n          </picture>\n\n          <div class=\"basket-main__list-info\">\n            <h3 class=\"basket-main__list-title\">${title}</h3>\n\n            <div class=\"basket-main__list-price-piece\">\n              <p class=\"basket-main__list-price-piece_new\">${price} <span>₴</span></p>\n              <p class=\"basket-main__list-price-piece_old\">${oldPrice} <span>₴</span></p>\n            </div>\n\n            <div class=\"basket-main__list-amount-box\">\n              <button class=\"basket-main__list-btn js-basket-btn-decrement\">\n                <svg\n                  class=\"basket-main__list-btn-icon\"\n                  width=\"9\"\n                  height=\"4\">\n                  <use xlink:href=\"#small-arrow-left\"></use>\n                </svg>\n              </button>\n              <span class=\"basket-main__list-amount js-basket-amount\">1</span>\n              <button class=\"basket-main__list-btn js-basket-btn-increment\">\n                <svg\n                  class=\"basket-main__list-btn-icon\"\n                  width=\"9\"\n                  height=\"4\">\n                  <use xlink:href=\"#small-arrow-righ\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"basket-main__list-price-box list-price\">\n            <div class=\"list-price__icon-box\">\n              <svg\n                width=\"18\"\n                height=\"18\"\n                class=\"list-price__icon list-price__icon_remove js-remove-card\">\n                <use class=\"js-remove-card\" xlink:href=\"#remove-basket\"></use>\n              </svg>\n              <svg\n                width=\"16\"\n                height=\"14\"\n                class=\"list-price__icon list-price__icon_favorite\">\n                <use xlink:href=\"#icon-heart\"></use>\n              </svg>\n            </div>\n            <p class=\"list-price__price js-current-price\" \n            data-price=\"${price}\">\n            ${price}<span> ₴</span>\n            </p>\n          </div>\n        </li>`;\n  });\n}\n\nexport function markupCardsError() {\n  return `\n      <li\n        class=\"basket-main__list-item_empty-basket list-item__empty-basket js-empty-basket-item\">\n        <h3 class=\"list-item__empty-basket-title\">\n          Ваш кошик порожній - додайте товари, щоб він не сумував.\n        </h3>\n        <img\n          class=\"list-item__empty-basket-img\"\n          width=\"500\"\n          height=\"500\"\n          src=\"https://firebasestorage.googleapis.com/v0/b/flowers-4b1a5.appspot.com/o/pages%2F404%2Fempty-shopping-cart.webp?alt=media&token=3c262b31-1194-4d5e-9cc7-4c1f827f99a0\"\n          alt=\"#\" />\n      </li>`;\n}\n","import { KEY_BASKET } from '../../utils/constants';\nimport { markupCardsSuccess, markupCardsError } from './markup-cards-basket';\nimport { updateLocalStorageCounter } from '../../utils/update-local-storage-counter';\n\nexport function getLocalStorageData() {\n  const cardList = document.querySelector('.js-basket-card-list');\n  const titleShoppingList = document.querySelector('.js-title-shopping-list');\n  // ---refs--\n  let basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n\n  console.log(basketArr);\n  // ---createMarkup---\n  function createMarkup(arrData) {\n    if (arrData.length) {\n      cardList.innerHTML = markupCardsSuccess(arrData).join('');\n      titleShoppingList.style.display = 'flex';\n    } else {\n      cardList.innerHTML = markupCardsError();\n      titleShoppingList.style.display = 'none';\n    }\n  }\n  createMarkup(basketArr);\n\n  // ---handlerLocalStorageData---\n  cardList.addEventListener('click', handlerLocalStorageData);\n\n  function handlerLocalStorageData({ target, type }) {\n    if (target.classList.contains('js-remove-card')) {\n      removeTargetCard(target);\n    }\n\n    if (target.closest('.js-basket-btn-increment')) {\n      incrementQuantity(target);\n    } else if (target.closest('.js-basket-btn-decrement')) {\n      decrementQuantity(target);\n    }\n  }\n\n  // ---incrementQuantity---\n  function incrementQuantity(target) {\n    const targetCard = target.closest('.basket-main__list-item');\n    let amountEl = targetCard.querySelector('.js-basket-amount');\n    let currentPriceEl = targetCard.querySelector('.js-current-price');\n    // ---refs--\n    let quantity = +amountEl.textContent;\n\n    const currentPrice = +currentPriceEl.dataset.price;\n\n    console.log(quantity);\n    console.log(currentPrice);\n\n    if (quantity >= 10) return;\n\n    amountEl.textContent = quantity += 1;\n    currentPriceEl.textContent = `${currentPrice * quantity} ₴`;\n  }\n\n  // ---decrementQuantity---\n  function decrementQuantity(target) {\n    const targetCard = target.closest('.basket-main__list-item');\n    let amountEl = targetCard.querySelector('.js-basket-amount');\n    let currentPriceEl = targetCard.querySelector('.js-current-price');\n    // ---refs--\n    let quantity = +amountEl.textContent;\n    const currentPrice = +currentPriceEl.dataset.price;\n\n    if (quantity <= 1) return;\n\n    amountEl.textContent = quantity -= 1;\n    currentPriceEl.textContent = `${currentPrice * quantity} ₴`;\n  }\n\n  // --removeTargetCard---\n  function removeTargetCard(target) {\n    const targetCard = target.closest('.basket-main__list-item');\n    const cardId = targetCard.dataset.id;\n\n    targetCard.remove();\n\n    basketArr = basketArr.filter(({ id }) => {\n      return id !== cardId;\n    });\n\n    localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr));\n\n    updateLocalStorageCounter();\n\n    if (!basketArr.length) {\n      cardList.innerHTML = markupCardsError();\n      titleShoppingList.style.display = 'none';\n    }\n  }\n\n  window.addEventListener('storage', () => {\n    basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n    updateLocalStorageCounter();\n    createMarkup(basketArr);\n  });\n}\n","import { header } from './partials/header';\nimport { mobMenu } from './partials/mob-menu';\nimport { createAccordionFaq } from './partials/accordion';\nimport { getLocalStorageData } from './pages/basket/get-local-storage-data';\nimport { updateLocalStorageCounter } from './utils/update-local-storage-counter';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  header();\n  mobMenu();\n  createAccordionFaq();\n  getLocalStorageData();\n  updateLocalStorageCounter();\n});\n"],"names":["markupCardsSuccess","arrData","obj","i","id","discount","price","oldPrice","title","png","webp","markupCardsError","getLocalStorageData","cardList","titleShoppingList","basketArr","KEY_BASKET","createMarkup","handlerLocalStorageData","target","type","removeTargetCard","incrementQuantity","decrementQuantity","targetCard","amountEl","currentPriceEl","quantity","currentPrice","cardId","updateLocalStorageCounter","header","mobMenu","createAccordionFaq"],"mappings":"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"}