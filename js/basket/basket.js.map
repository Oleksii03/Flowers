{"version":3,"file":"basket.js","sources":["../../../src/js/pages/basket/markup-cards-basket.js","../../../src/js/pages/basket/get-local-storage-data.js","../../../src/js/basket.js"],"sourcesContent":["export function markupCardsSuccess(arrData) {\n  return arrData.map((obj, i) => {\n    const {\n      id,\n      discount,\n      price,\n      oldPrice,\n      title,\n      img: { png, webp },\n    } = obj;\n\n    // Return HTML markup for cards\n    return `\n      <li class=\"basket-main__list-item\" data-id=\"${id}\">\n          <picture class=\"basket-main__list-picture\">\n            <source\n              srcset=\"${webp}\"\n              type=\"image/webp\" />\n            <img\n              class=\"basket-main__list-img\"\n              width=\"83\"\n              height=\"104\"\n              src=\"${png}\"\n              alt=\"#\" />\n          </picture>\n\n          <div class=\"basket-main__list-info\">\n            <h3 class=\"basket-main__list-title\">${title}</h3>\n\n            <div class=\"basket-main__list-price-piece\">\n              <p class=\"basket-main__list-price-piece_new\">${price} <span>₴</span></p>\n              <p class=\"basket-main__list-price-piece_old\">${oldPrice} <span>₴</span></p>\n            </div>\n\n            <div class=\"basket-main__list-amount-box\">\n              <button class=\"basket-main__list-btn\">\n                <svg\n                  class=\"basket-main__list-btn-icon\"\n                  width=\"9\"\n                  height=\"4\">\n                  <use xlink:href=\"#small-arrow-left\"></use>\n                </svg>\n              </button>\n              <span class=\"basket-main__list-amount\">1</span>\n              <button class=\"basket-main__list-btn\">\n                <svg\n                  class=\"basket-main__list-btn-icon\"\n                  width=\"9\"\n                  height=\"4\">\n                  <use xlink:href=\"#small-arrow-righ\"></use>\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          <div class=\"basket-main__list-price-box list-price\">\n            <div class=\"list-price__icon-box\">\n              <svg\n                width=\"18\"\n                height=\"18\"\n                class=\"list-price__icon list-price__icon_remove js-remove-card\">\n                <use class=\"js-remove-card\" xlink:href=\"#remove-basket\"></use>\n              </svg>\n              <svg\n                width=\"16\"\n                height=\"14\"\n                class=\"list-price__icon list-price__icon_favorite\">\n                <use xlink:href=\"#icon-heart\"></use>\n              </svg>\n            </div>\n            <p class=\"list-price__price\">${price} <span>₴</span></p>\n          </div>\n        </li>`;\n  });\n}\n\nexport function markupCardsError() {\n  return `\n      <li\n        class=\"basket-main__list-item_empty-basket list-item__empty-basket js-empty-basket-item\">\n        <h3 class=\"list-item__empty-basket-title\">\n          Ваш кошик порожній - додайте товари, щоб він не сумував.\n        </h3>\n        <img\n          class=\"list-item__empty-basket-img\"\n          width=\"500\"\n          height=\"500\"\n          src=\"https://firebasestorage.googleapis.com/v0/b/flowers-4b1a5.appspot.com/o/pages%2F404%2Fempty-shopping-cart.webp?alt=media&token=3c262b31-1194-4d5e-9cc7-4c1f827f99a0\"\n          alt=\"#\" />\n      </li>`;\n}\n","import { KEY_BASKET } from '../../utils/constants';\nimport { markupCardsSuccess, markupCardsError } from './markup-cards-basket';\nimport { updateLocalStorageCounter } from '../../utils/update-local-storage-counter';\n\nlet basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n\nexport function getLocalStorageData() {\n  const cardList = document.querySelector('.js-basket-card-list');\n  const emptyItemBasket = document.querySelector('.js-empty-basket-item');\n  // ---refs--\n\n  function createMarkup(arrData) {\n    if (arrData.length) {\n      cardList.innerHTML = markupCardsSuccess(arrData).join('');\n    } else {\n      cardList.innerHTML = markupCardsError();\n    }\n  }\n  createMarkup(basketArr);\n\n  cardList.addEventListener('click', handlerLocalStorageData);\n\n  function handlerLocalStorageData({ target }) {\n    if (target.classList.contains('js-remove-card')) {\n      removeTargetCard(target);\n    }\n  }\n\n  // --removeTargetCard---\n\n  function removeTargetCard(target) {\n    const targetCard = target.closest('.basket-main__list-item');\n    const cardId = targetCard.dataset.id;\n\n    targetCard.remove();\n\n    basketArr = basketArr.filter(({ id }) => {\n      return id !== cardId;\n    });\n\n    localStorage.setItem(KEY_BASKET, JSON.stringify(basketArr));\n\n    updateLocalStorageCounter();\n\n    if (!basketArr.length) {\n      cardList.innerHTML = markupCardsError();\n    }\n  }\n}\n\nwindow.addEventListener('storage', () => {\n  basketArr = JSON.parse(localStorage.getItem(KEY_BASKET)) ?? [];\n  updateLocalStorageCounter();\n  getLocalStorageData();\n});\n","import { header } from './partials/header';\nimport { mobMenu } from './partials/mob-menu';\nimport { createAccordionFaq } from './partials/accordion';\nimport { getLocalStorageData } from './pages/basket/get-local-storage-data';\nimport { updateLocalStorageCounter } from './utils/update-local-storage-counter';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  header();\n  mobMenu();\n  createAccordionFaq();\n  getLocalStorageData();\n  updateLocalStorageCounter();\n});\n"],"names":["markupCardsSuccess","arrData","obj","i","id","discount","price","oldPrice","title","png","webp","markupCardsError","basketArr","KEY_BASKET","getLocalStorageData","cardList","createMarkup","handlerLocalStorageData","target","removeTargetCard","targetCard","cardId","updateLocalStorageCounter","header","mobMenu","createAccordionFaq"],"mappings":"sGAAO,SAASA,EAAmBC,EAAS,CAC1C,OAAOA,EAAQ,IAAI,CAACC,EAAKC,IAAM,CAC7B,KAAM,CACJ,GAAAC,EACA,SAAAC,EACA,MAAAC,EACA,SAAAC,EACA,MAAAC,EACA,IAAK,CAAE,IAAAC,EAAK,KAAAC,CAAM,CACnB,EAAGR,EAGJ,MAAO;AAAA,oDACyCE,CAAE;AAAA;AAAA;AAAA,wBAG9BM,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAMPD,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA,kDAK0BD,CAAK;AAAA;AAAA;AAAA,6DAGMF,CAAK;AAAA,6DACLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAuC1BD,CAAK;AAAA;AAAA,cAGhD,CAAG,CACH,CAEO,SAASK,GAAmB,CACjC,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAaT,CCtFA,IAAIC,EAAY,KAAK,MAAM,aAAa,QAAQC,CAAU,CAAC,GAAK,GAEzD,SAASC,GAAsB,CACpC,MAAMC,EAAW,SAAS,cAAc,sBAAsB,EACtC,SAAS,cAAc,uBAAuB,EAGtE,SAASC,EAAaf,EAAS,CACzBA,EAAQ,OACVc,EAAS,UAAYf,EAAmBC,CAAO,EAAE,KAAK,EAAE,EAExDc,EAAS,UAAYJ,GAExB,CACDK,EAAaJ,CAAS,EAEtBG,EAAS,iBAAiB,QAASE,CAAuB,EAE1D,SAASA,EAAwB,CAAE,OAAAC,GAAU,CACvCA,EAAO,UAAU,SAAS,gBAAgB,GAC5CC,EAAiBD,CAAM,CAE1B,CAID,SAASC,EAAiBD,EAAQ,CAChC,MAAME,EAAaF,EAAO,QAAQ,yBAAyB,EACrDG,EAASD,EAAW,QAAQ,GAElCA,EAAW,OAAM,EAEjBR,EAAYA,EAAU,OAAO,CAAC,CAAE,GAAAR,CAAE,IACzBA,IAAOiB,CACf,EAED,aAAa,QAAQR,EAAY,KAAK,UAAUD,CAAS,CAAC,EAE1DU,IAEKV,EAAU,SACbG,EAAS,UAAYJ,IAExB,CACH,CAEA,OAAO,iBAAiB,UAAW,IAAM,CACvCC,EAAY,KAAK,MAAM,aAAa,QAAQC,CAAU,CAAC,GAAK,GAC5DS,IACAR,GACF,CAAC,EChDD,SAAS,iBAAiB,mBAAoB,IAAM,CAClDS,IACAC,IACAC,IACAX,IACAQ,GACF,CAAC"}